import pytest
from invenio_access.permissions import system_identity
from invenio_vocabularies.proxies import current_service as vocab_service

# from oarepo_runtime.datastreams.fixtures import FixturesCallback, load_fixtures
from oarepo_vocabularies.records.api import Vocabulary
from tests.test_uidetail import remove_ws


@pytest.mark.skip
def test_uiedit(
    client_with_credentials,
    app,
    db,
    cache,
    lang_type,
    lang_data,
    vocab_cf,
    fake_manifest,
    search_clear,
):
    for _id in range(100):
        vocab_service.create(
            system_identity,
            {
                **lang_data,
                "id": str(_id),
            },
        )
    Vocabulary.index.refresh()
    edit_page = client_with_credentials.get("/vocabularies/languages/1/edit")
    assert edit_page.status_code == 200
    print(edit_page.text)
    assert remove_ws(
        """  
        {"all": [{"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "0"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "1"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "2"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "3"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "4"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "5"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "6"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "7"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "8"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "9"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "10"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "11"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "12"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "13"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "14"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "15"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "16"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "17"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "18"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "19"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "20"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "21"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "22"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "23"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "24"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "25"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "26"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "27"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "28"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "29"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "30"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "31"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "32"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "33"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "34"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "35"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "36"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "37"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "38"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "39"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "40"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "41"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "42"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "43"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "44"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "45"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "46"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "47"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "48"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "49"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "50"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "51"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "52"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "53"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "54"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "55"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "56"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "57"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "58"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "59"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "60"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "61"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "62"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "63"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "64"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "65"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "66"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "67"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "68"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "69"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "70"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "71"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "72"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "73"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "74"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "75"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "76"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "77"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "78"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "79"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "80"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "81"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "82"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "83"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "84"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "85"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "86"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "87"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "88"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "89"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "90"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "91"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "92"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "93"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "94"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "95"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "96"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "97"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "98"}, {"description": "English description", "element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "icon":"file-o", "props": {"akey": "avalue"}, "tags": ["recommended"], "text": "English", "value": "99"}]
        """
    ) in remove_ws(edit_page.text)


@pytest.mark.skip
def test_uiedit_locale(
    client_with_credentials,
    app,
    db,
    cache,
    vocab_cf,
    fake_manifest,
    reset_babel,
    search_clear,
):
    # load_fixtures(Path(__file__).parent / "icudata", callback=FixturesCallback())
    Vocabulary.index.refresh()

    reset_babel()
    edit_page = client_with_credentials.get(
        "/vocabularies/languages/en/edit", headers=[("Accept-Language", "cs")]
    )
    print(edit_page.text)
    assert remove_ws(
        """  
"languages": {"all": [
{"element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["Angli\\u010dtina"]}, "text": "Angli\\u010dtina", "value": "en"}, 
{"element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["\\u010ce\\u0161tina"]}, "text": "\\u010ce\\u0161tina", "value": "cs"}
        """
    ) in remove_ws(edit_page.text)

    reset_babel()
    edit_page = client_with_credentials.get(
        "/vocabularies/languages/en/edit", headers=[("Accept-Language", "en")]
    )
    print(edit_page.text)
    assert remove_ws(
        """  
"languages": {"all": [
{"element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["Czech"]}, "text": "Czech", "value": "cs"}, 
{"element_type": "leaf", "hierarchy": {"ancestors": [], "title": ["English"]}, "text": "English", "value": "en"}            
"""
    ) in remove_ws(edit_page.text)
