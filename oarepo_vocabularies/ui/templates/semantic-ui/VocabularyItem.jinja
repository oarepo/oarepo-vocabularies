{#def d, search_link=None, searchFacet=None, hide_definition=False #}
{# Renders a simple (non-hierarchical) vocabulary item or array of items. #}

{# Internal macro for rendering a single vocabulary item #}
{%- macro render_item(item) -%}
    {%- set id = ui_value(item.id) -%}
    {%- set title = localized(item.title) or "" -%}
    {%- set vocabulary_type = ui_value(item.type) -%}

    {%- if not hide_definition -%}
        {%- set definitionLink = "/vocabularies/" ~ vocabulary_type ~ "/" ~ id -%}
        <DefinitionLink href={{definitionLink}}> </DefinitionLink>
    {%- endif -%}

    {%- set aria_label = title ~ ": " ~ _("Find more records with this vocabulary term") -%}
    {%- set data = {
        "value": id,
        "title": _("Find more records with this vocabulary term"),
        "label": title,
        "aria": aria_label,
    } -%}

    {%- if search_link -%}
        <SearchLink search_link={{search_link}} searchFacet={{searchFacet}} data={{data}}>
        </SearchLink>
    {%- else -%}
        <span>{{ title }}</span>
    {%- endif -%}
{%- endmacro -%}

{# Render array of simple vocabulary items #}
{%- if ui_value(d) -%}
    {%- for item in as_array(d) -%}
        <span>{{ render_item(item) }}</span>
    {%- endfor -%}
{%- endif -%}
